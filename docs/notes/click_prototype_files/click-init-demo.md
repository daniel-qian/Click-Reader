# Click Interactive Reader Demo - 功能链路与技术架构

## 项目概述

互动阅读器是一个基于Next.js的Web应用，通过在文本中嵌入互动圆点，让用户点击查看相关图像，长按生成AI变化版本。

## quickstart
```bash
cd d:\Click-Reader\interactive-reader
npm install
npm run dev
```

## 功能链路设计

### 1. 文本内容加载
**实现方式：**
- 静态文本内容存储在组件内
- 按段落分割文本进行渲染
- 支持Markdown格式的标题和段落

**技术栈：** React组件状态、字符串处理

### 2. 互动点定位与渲染
**实现方式：**
- 基于段落索引和字符位置的静态配置
- 在指定位置插入InteractiveDot组件
- 支持多个互动点在同一段落中的排序

**技术栈：** React组件渲染、数组操作、CSS定位

### 3. 用户交互处理
**实现方式：**
- 鼠标悬停：播放悬停音效，显示视觉反馈
- 短按点击：播放点击音效，显示图片模态框
- 长按操作：播放长按音效，触发AI图像生成

**技术栈：** React事件处理、定时器、Web Audio API

### 4. 音效系统
**实现方式：**
- 使用Web Audio API实时合成音效
- 不同交互类型对应不同频率和时长的音效
- 音效类型：悬停(600Hz)、点击(800Hz)、长按(400Hz)

**技术栈：** Web Audio API、振荡器、增益控制

### 5. 图片展示系统
**实现方式：**
- 模态框组件展示图片和描述文本
- 支持ESC键关闭和点击背景关闭
- 图片叠加文字说明

**技术栈：** React Portal、CSS动画、事件监听

### 6. AI图像生成模拟
**实现方式：**
- 模拟2秒的生成等待时间
- 生成带有时间戳的变化版本记录
- 自动显示生成结果的模态框

**技术栈：** Promise异步处理、setTimeout、状态管理

### 7. 历史记录管理
**实现方式：**
- 使用localStorage存储生成历史
- 记录原始互动点ID、生成时间、描述信息
- 支持历史记录页面查看

**技术栈：** localStorage API、JSON序列化、React Router

## 系统架构

### 组件架构
```
┌─────────────────┐
│   Pages/App     │
├─────────────────┤
│   Reader        │ ← 主要阅读组件
│ ┌─────────────┐ │
│ │InteractiveDot│ │ ← 互动圆点
│ │ ImageModal  │ │ ← 图片模态框
│ └─────────────┘ │
├─────────────────┤
│   CSS Modules   │ ← 样式系统
└─────────────────┘
```

### 数据流
```
文本内容 → 解析段落 → 定位互动点 → 渲染组件
    ↓
用户交互 → 事件处理 → 音效播放 → 状态更新
    ↓
模态框显示 ← 图片加载 ← 数据获取
    ↓
历史记录 → localStorage → 持久化存储
```

## 技术栈总览

### 前端框架
- **Next.js 14** - React全栈框架
- **React 18** - 组件化UI库
- **CSS Modules** - 样式隔离

### 核心功能
- **Web Audio API** - 音效生成
- **localStorage** - 本地存储
- **React Hooks** - 状态管理

### 开发工具
- **Node.js** - 运行环境
- **npm** - 包管理
- **PostCSS** - CSS处理

## 最终功能需求

### 核心功能
1. **文本阅读** - 支持长文本分段显示
2. **互动圆点** - 在文本中精确定位和显示
3. **图片展示** - 点击圆点显示相关图片
4. **AI生成** - 长按圆点生成图片变化版本
5. **音效反馈** - 不同操作对应不同音效
6. **历史记录** - 保存和查看生成历史

### 用户体验
1. **响应式设计** - 适配桌面和移动设备
2. **流畅动画** - 模态框进入退出动画
3. **键盘支持** - ESC键关闭模态框
4. **触摸优化** - 支持移动设备触摸操作

### 性能要求
1. **快速加载** - 静态资源优化
2. **流畅交互** - 60fps动画性能
3. **内存管理** - 及时清理定时器和事件监听
4. **缓存策略** - localStorage数据持久化